<!--=======================================-->
<!--  HEADAS HTML HELP FILE TEMPLATE, v1.1 -->
<!--=======================================-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
<style type="text/css">
  body { margin-left: 5%; margin-right: 5%; }
  h1,h2,h3,h4 { margin-left: -5%;}
</style>
<title>HEADAS help file</title>
</head>
<body>

<h2>NAME</h2>

sxsperseus - Adjust the gain for the Perseus observations 

<h2>USAGE</h2>

 sxsperseus infile outfile driftfile 

<h2>DESCRIPTION</h2>

'sxsperseus' adjusts the energy scale for the Perseus data.
These observations were taken at the very early stage of the mission when the SXS detector was not  
in thermal equilibrium. To correct the energy scale, these data are first corrected as for all 
other data with the tasks 'sxsgain' and 'sxspha2pi' using the CALDB gain file that do not include
the additional pixel-to-pixel derived from the Fe55 observation. As second step the task 'sxsperseus' 
calculates the proper gain adjustment derived from the Fe55 to the time of the Perseus observation.
The resuls of this calculation are written in the EPIPER and EPI2PER columns. The EPI2PER is used
to recompute the PI column. 'sxsperseus' run to all the data collected before 00:41 UT March 4th 2016. 

<p> 



<h2>PARAMETERS</h2>
<dl>

<p>
<dt>infile [file]</dt>
<dd>Input SXS event file.</dd>
</p>

<p>
<dt>outfile [file]</dt>
<dd>Output SXS event file</dd>
</p>

<p>
<dt>driftfile [file]</dt>
<dd>Input calibration pixel gain file. This is the output of the task 'sxsgain'</dd>
</p>

<p>
<dt>(dgfile = REFDATA) [file]</dt>
<dd>Input gain coefficients file. This file is read from the REFDATA area of HEAsoft and should not be changed.</dd>
</p>

<p>
<dt>(offsetfile = REFDATA) [file]</dt>
<dd>Input calibration offset file. This file is read from the REFDATA area of HEAsoft and should not be changed.</dd>
</p>

<p>
<dt>(outrange = NULL) [string]</dt>
<dd>Define how to handle events with TIMEs outside of the driftfile TIME range.
If outrange = NULL, then assign EPIPER=EPI2PER+PI=NULL; if outrange=CONST, then use
the gain correction from the first or last time in driftfile; if 
outrange=EXTRAP, then extrapolate the gain correction from driftfile.</dd>
</p>

<p>
<dt>(method = FIT) [string]</dt>
<dd>Specifies the correction column to use from driftfile.  If method=FIT,
use the COR_FIT column, if method="AVERAGE", use the COR_AVE column.</dd>
</p>

<p>
<dt>(extended = no) [bool]</dt>
<dd>Use extended energy range (yes/[no]).If the parameter is set to yes, the task read from the column EPIE and EPI2E and write the 
output of the gain calculation in the EPIEPER and EPI2EPER columns. The channel is written in the column PIE. 
NOTE: This option should be used in conjunction with parameters 'binwidth', 'offset' and 'tlmax'. 
It is advised to use the values recommended in the Hitomi user guide or step by step guide</dd>   </dd>
</p>

<p>
<dt>(binwidth = 1.0) [real]</dt>
<dd>PI bin width for extended energy range [eV]</dd>
</p>

<p>
<dt>(offset = 0.5) [real]</dt>
<dd>Offset for first PI for extended energy range [eV]</dd>
</p>

<p>
<dt>(tlmax = 32767) [int]</dt>
<dd>Maximum PI channel for extended energy range</dd>
</p>

<p>
<dt>(buffer = -1) [int]</dt>
<dd>Rows to buffer (-1=auto, 0=none, >0=numrows)</dd>
</p>

<p>
<dt>(clobber = no) [bool]</dt>
<dd>Overwrite existing output file (yes/[no])</dd>
</p>

<p>
<dt>(chatter = 1) [int]</dt>
<dd>Chatter level for output</dd>
</p>

<p>
<dt>(logfile = !DEFAULT) [string]</dt>
<dd>Output log file (DEFAULT, NONE; '!' to clobber)</dd>
</p>

<p>
<dt>(debug = no) [bool]</dt>
<dd>Enable debug mode (yes/[no])</dd>
</p>

<p>
<dt>(history = yes) [bool]</dt>
<dd>Record tool parameters in HISTORY ([yes]/no)</dd>
</p>

<p>
<dt>(mode = ql) [string]</dt>
<dd>Mode of automatic parameters</dd>
</p>

</dl>


<h2>LAST MODIFIED</h2>
December  2016

</body>
</html>
