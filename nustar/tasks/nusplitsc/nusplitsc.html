<! NUSPLITSC (Feb2016)  >                           
<html>
<head>
<style type="text/css">
  body { margin-left: 5%; margin-right: 5%; }
  h1,h2,h3,h4 { margin-left: -5%;}
</style>
<title>nusplitsc help file</title>
</head>

<body>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#9690CC">
<h2>NAME</h2>
nusplitsc --  Split NuSTAR Spacecraft Science (SC) cleaned event files
<h2>USAGE</h2>
<tt>nusplitsc infile chu123hkfile hkfile [parameter = < value >]</tt>
<h2>DESCRIPTION</h2>
<p>
'nusplitsc' decomposes the NuSTAR SCIENCE_SC (06) event files into a
maximum of seven distinct event files corresponding to the CHU
combinations descrived below.
<p>
NuSTAR SCIENCE_SC (06) observing mode events refer to scientific data
collected during time intervals in which an aspect solution from the
on-board star tracker located on the X-ray optics bench (Camera Head
Unit 4, CHU4), the primary method for determining the absolute
pointing, is not available. During these time intervals, the aspect
reconstruction used to calculate sky coordinates is derived using data
from the three star trackers located on the spacecraft bus (Camera
Head Units 1-2-3, CHU1/CHU2/CHU3). In these cases the accuracy of the
sky coordinates degrades to about 2 arcminutes, mainly due to thermal
flexion of the spacecraft bus star cameras. Moreover, the three star
tracker camera units data can be integrated in seven different
combinations (CHU1 only, CHU2 only, CHU3 only, CHU1&2,CHU1&3, CHU2&3,
and CHU1&2&3) that are characterized by a specific aspect
reconstruction. Due to the switching between different CHU
combinations, the sky images can then show multiple centroids of the
same source precluding an accurate scientific analysis of these data.
<p>
'nusplitsc' first generates a set of seven GTI files based on
CHU1/CHU2/CHU3 housekeeping parameters stored in the input file
'chu123hkfile'. The GTI files are created by running the multi-mission
task 'maketime'. The GTI selection expressions, corresponding to the seven 
CHU combinations, are read from the input file 'chu123rangefile'
(CALDB by default). In the second step, the task splits the input
event file using the calculated GTIs using the multi-mission package
'xselect'. Finally, 'nusplitsc' applies the dead time correction to
the temporal keywords of the output event files by running the
'nulivetime' task (see the 'nulivetime' help file for additional
details).
<p>
The event files generated by 'nusplitsc' need to be carefully checked
before the scientific analysis. In particular, it is necessary to
verify that the target source in the sky images appears as a well
defined centroid. If multiple centroids are present the
corresponding event file should not be used for the generation of
high-level data products (i.e. energy spectra and light-curves). In
these cases, the user can set the input parameter 'splitmode'
(='NORMAL' by default) to 'STRICT' to remove some CHU1/CHU2/CHU3
flickering which can be at the origin of the multiple centroids. As an
additional option, multiple centroids in some cases can be removed by
setting the 'timecut' input parameter (='no' by default) to 'yes'.
<p>
By default the task applies the stem of the input files to the output
files (input parameter 'stemout=DEFAULT'). The naming convention of
the generated event files in the case 'splitmode=NORMAL' is the
following:
<pre>
nu10012001002A06_chu1_N_cl.evt      L2 FPMA 06 event file for CHU1 only
nu10012001002A06_chu2_N_cl.evt      L2 FPMA 06 event file for CHU2 only  
nu10012001002A06_chu3_N_cl.evt      L2 FPMA 06 event file for CHU3 only
nu10012001002A06_chu12_N_cl.evt     L2 FPMA 06 event file for CHU1 and CHU2  
nu10012001002A06_chu13_N_cl.evt     L2 FPMA 06 event file for CHU1 and CHU3  
nu10012001002A06_chu23_N_cl.evt     L2 FPMA 06 event file for CHU2 and CHU3  
nu10012001002A06_chu123_N_cl.evt    L2 FPMA 06 event file for CHU1 and CHU2 and CHU3  
</pre>
In the case 'splitmode=STRICT' in the output file names the _N_ string
is replaced by _S_.
<p>
To extract the high-level data products from the output event files
the 'nuproducts' software module with standard command lines can be
used. Note that each CHU1/CHU2/CHU3 combination has a specific aspect
reconstruction with a typical scatter of about 2 arcminutes. For this
reason, a set of specific spatial source and backgroud extraction
regions should be used to extract the scientific products.
<h2>PARAMETERS</h2>
<dl>
<dt>infile [file name]
<dd>Name of the input SCIENCE_SC (06) FITS Cleaned Event File.
</dl>
<dl>
  <dt>chu123hkfile  [file name]
  <dd>Name of the input CHU123 Housekeeping FITS File.
</dl>
<dl>
  <dt>hkfile  [file name]
  <dd>Name of the input Housekeeping FITS File.  
</dl>
<dl>
  <dt>(chu123rangefile=CALDB) [filename]
  <dd>Name of the input CHU123RANGE file or CALDB. If set to CALDB (default), use the file in
  the Calibration Database.
</dl>
<dl>
  <dt>(splitmode=NORMAL) [string]
  <dd>CHU123 splitting mode (NORMAL, STRICT). </dd>
</dl>
<dl>
  <dt>(timecut=no) [boolean]
  <dd>If set to yes, the non simultaneous CHU1/CHU2/CHU3 time intervals are excluded. </dd>
</dl>
<dl>
  <dt>(stemout=DEFAULT) [string]
  <dd>Stem for the output event files or DEFAULT to use the stem of input files.</dd>
</dl>
<dl>
  <dt>(outdir=./) [string]
  <dd>Name of the output directory for products.</dd>
</dl>
<dl>
  <dt>(cleanup=yes) [boolean]
  <dd>If set to yes, delete temporary files.
</dl>
<dl>
<dt>(clobber=no) [boolean]
  <dd>If set to yes, overwrite the output file.
</dl>
<dl>
  <dt>(history=yes) [boolean]
  <dd>If set to yes, write parameter values and other information in HISTORY blocks.
</dl>
<dl>
  <dt>(chatter=3) [integer]
  <dd>Chatter Level (min=0, max=5).
</dl>
<p>
<h2>EXAMPLES</h2>
<ol>
<li>Split the input cleaned event file 'nu60101035002A06_cl.evt' according to individual CHU1/CHU2/CHU3 combinations.
<p>
<pre>
> nusplitsc infile=nu60101035002A06_cl.evt hkfile=nu60101035002A_fpm.hk 
  chu123hkfile=nu60101035002_chu123.fits 
</pre>
<p>
<h2>BUGS</h2>
<h2>SEE ALSO</h2>
<h2>LAST MODIFIED</h2>
February 2016
</body>
</html>
