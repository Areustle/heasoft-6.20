<! NUCOORD (Sep2012)  >                           
<html>
<head>
<style type="text/css">
  body { margin-left: 5%; margin-right: 5%; }
  h1,h2,h3,h4 { margin-left: -5%;}
</style>
<title>nucoord help file</title>
</head>

<body>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#9690CC">
<h2>NAME</h2>
nucoord -- Convert Raw coordinates into Detector and Sky coordinates of NuSTAR event files
<h2>USAGE</h2>
<tt>nucoord infile outfile mastaspectfile attfile pntra pntdec optaxisfile det1reffile [parameter = < value >]</tt>
<h2>DESCRIPTION</h2>
<p>
'nuccord' is a script that runs the modules necessary for the conversion of Raw coordinates into Detector and Sky coordinates of 
NuSTAR event files. The script also calculates the SKY position of the telescope optical axis and of a reference point in the DET1 frame.
<p>
First, the script runs the 'nucalcpos' task to calculate the detector coordinates in the Focal Plane Bench Frame 
('DET1') and in the Optics Bench Frame ('DET2'). The details of this calculation can be found in the 
'nucalcpos' help file.
<p>
Second, the 'nucoord' script runs the multi-mission ftool 'coordinator' to convert 'DET2' coordinates in SKY coordinates 
(see 'coordinator' help file).
<p>
Third, the 'nucoord' script runs the 'nuskypos' task for the generation of the optical axis file ('optaxisfile') and of the DET1 reference file 
('det1reffile'). See the help file of the 'nuskypos' task for a more detailed description.
<p>
<h2>PARAMETERS</h2>
<dl>
<dt>infile [file name]
<dd>Name of the input FITS Event File.
<p>  
<dt>outfile [file name]
<dd>Name of output FITS Event File.
<p>
<dt>(initseed=no) [boolean]
<dd>If set to yes, the random number generator uses a frozen seed value. If set to no, different seeds are generated for each run.
<p>
<dt>(pixposfile=CALDB) [filename]
<dd>Name of the input pixel location file or CALDB.
<p>
<dt>(alignfile=CALDB) [filename]
<dd>Name of the input alignment file or CALDB
<p>
<dt>mastaspectfile [filename]
<dd>Name of the input Mast Aspect Solution File.
<p>
<dt>attfile [filename]
<dd>Name of FITS attitude file.
<p>
<dt>(teldef=CALDB) [filename]
<dd>Name of teldef calibration file or CALDB.
<p>
<dt>(aberration=no) [boolean]
<dd>If set to yes, aberration is included in aspecting.
<p>
<dt>(follow_sun=yes) [boolean]
<dd>If set to yes, recalculate the Sun position for each event.
<p>
<dt>pntra [real]
<dd>R.A. of S/C nominal pointing (degrees).
<p>
<dt>pntdec [real]
<dd>Declination of S/C nominal pointing (degrees).
<p>
<dt>(randomizecoordinator=yes) [boolean]
<dd>If set to yes, Randomize coordinates when rebinning.
<p>
<dt>(seedcoordinator=-1956) [integer]
<dd>Random number generator seed for coordinator task.
<p>
<dt>(timemargin=32) [real]
<dd>Allowed margin for time extrapolation (sec).
<p>
<dt>(attinterpol = LINEAR) [string]
<dd>Method to calculate attitude interpolation ([LINEAR|CONSTANT]).
<p>
<dt>optaxisfile [filename]
<dd>Name of the the output Optical Axis File.
<p>
<dt>det1reffile [filename]
<dd>Name of the the output DET1 Reference Pixel File.
<p>
<dt>(det1xref = 350) [integer]
<dd> DET1X coordinate of the detector reference pixel.
<p>
<dt>(det1yref = 350) [integer]
<dd> DET1Y coordinate of the detector reference pixel.
<p>
<dt>(clobber=no) [boolean]
<dd>If set to yes, overwrite the output file.
<p>
<dt>(history=yes) [boolean]
<dd>If set to yes, write parameter values and other information in HISTORY blocks.
<p>
<dt>(chatter = 2) [integer]
<dd>Chatter Level (min=0, max=5).
</dl>    
<h2>EXAMPLES</h2>
<ol>
<li>Convert the RAW coordinates of the input event file 'nu40060001001A_uf.evt' to DET1, DET2 and SKY coordinates using the 
the pixel location file stored in the CALDB. The DET1X/DET1Y, DET2X/DET2Y and X/Y coordinates are written in the output file 
'nu40060001001A_out.evt'. The optical axis file and the DET1 reference file are also generated.
<p>
<pre>
>  nucoord infile=nu40060001001A_uf.evt outfile=nu40060001001A_out.evt mastaspectfile=nu40060001001_mast.fits
   attfile=nu40060001001_att.fits pntra=258.3 pntdec=-23.7 optaxisfile=nu40060001001A_oa.fits 
   det1reffile=nu40060001001A_det1.fits 
</pre>
</p>
</blockquote>
<p>
<h2>BUGS</h2>
<h2>SEE ALSO</h2>
<h2>LAST MODIFIED</h2>
September 2012
</body>
</html>
