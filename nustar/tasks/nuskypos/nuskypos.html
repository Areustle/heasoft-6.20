<! NUSKYPOS (March2013)  >                           
<html>
<head>
<style type="text/css">
  body { margin-left: 5%; margin-right: 5%; }
  h1,h2,h3,h4 { margin-left: -5%;}
</style>
<title>nuskypos help file</title>
</head>

<body>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#9690CC">
<h2>NAME</h2>
nuskypos -- Calculates the SKY position of the optical axis, of the aperture stop center and of the DET1 reference pixel for NuSTAR
<h2>USAGE</h2>
<tt>nuskypos pntra pntdec attfile alignfile teldef instrument optaxisfile det1reffile mastaspectfile [parameter = < value >]</tt>
<h2>DESCRIPTION</h2>
<p>
'nuskypos' calculates the SKY position of the telescope optical axis, of the aperture stop center and of a reference pixel in 
the DET1 frame. This module is called by the 'nucoord' script.
<p>
The location of the optical axis in the DET2 frame is stored in the CALDB alignfile. 'nuskypos' reads this position and 
transforms it in the SKY frame using the attitude and teldef files provided in input trough the parameters 'attfile' and 'teldef', 
respectivel. The SKY position of the optical axis of the aperture stop center as a function of time is stored in the output file 'optaxisfile'.
<p>
The 'nuskypos' also calculates the DET2 and SKY coordinates of the center of the aperture stop. The location of the aperture stop center in 
the DET1 frame is stored in the CALDB alignfile. The task 'nuskypos' reads this position and converts the Focal Plane Bench Frame (DET1) 
coordinates into the Optics Bench Frame (DET2) detector coordinates using the mast aspect solution file ('mastaspectfile'). 
As a second step, the DET2 coordinates are transformed in SKY coordinates using the attitude and teldef files.  
The DET2 and SKY positions of the aperture stop center are stored in the output file 'optaxisfile'.
<p>
Moreover, 'nuskypos' calculates the SKY coordinates of a reference pixel in the DET1 frame provided in input via the parameters 
'det1xref' and 'det1yref'. The task first converts the DET1 coordinates into the DET2 coordinates using the mast 
aspect solution file ('mastaspectfile'). As a second step, the DET2 coordinates are 
transformed in SKY coordinates using the attitude and teldef files.  The SKY position of the detector reference pixel as a function of time 
is stored in the output file 'det1reffile'.
<p>
<h2>PARAMETERS</h2>
<dl>
<dt>pntra [real]
<dd>R.A. of S/C nominal pointing (degrees).
<p>
<dt>pntdec [real]
<dd>Declination of S/C nominal pointing (degrees).
<p>
<dt>attfile [filename]
<dd>Name of FITS attitude file.
<p>
<dt>alignfile [filename]
<dd>Name of the input alignment file.
<p>
<dt>teldef [filename]
<dd>Name of teldef calibration file.
<p>
<dt>instrument [string]
<dd>Focal Plane Module (FPMA or FPMB).
<p>
<dt>(aberration=no) [boolean]
<dd>If set to yes, aberration is included in aspecting.
<p>
<dt>optaxisfile [filename]
<dd>Name of the the output Optical Axis File or NONE for none.
<p>
<dt>det1reffile [filename]
<dd>Name of the the output DET1 Reference Pixel File or NONE for none.
<p>
<dt>(det1xref = 350) [integer]
<dd>DET1X coordinate of the detector reference pixel.
<p>
<dt>(det1yref = 350) [integer]
<dd>DET1Y coordinate of the detector reference pixel.
<p>
<dt>mastaspectfile [filename]
<dd>Name of the input Mast Aspect Solution File.
<p>
<dt>(initseed=no) [boolean]
<dd>If set to yes, the random number generator uses a frozen seed value. If set to no, different seeds are generated for each run.
<p>
<dt>(clobber=no) [boolean]
<dd>If set to yes, overwrite the output file.
<p>
<dt>(history=yes) [boolean]
<dd>If set to yes, write parameter values and other information in HISTORY blocks.
<p>
<dt>(chatter = 2) [integer]
<dd>Chatter Level (min=0, max=5).
</dl>    
<h2>EXAMPLES</h2>
<ol>
<li>Calculate the SKY position of the optical axis, the aperture stop center and of the DET1 reference pixel and store them 
in the output files 'nu40060001001A_oa.fits', 'nu40060001001A_det1.fits', respectively.
<p>
<pre>
>  nuskypos mastaspectfile=nu40060001001_mast.fits attfile=nu40060001001_att.fits pntra=258.3 pntdec=-23.7
   alignfile=nuCalign20100101v003.fits teldef=nuA20100101v001.teldef instrument=FPMA 
   optaxisfile=nu40060001001A_oa.fits det1reffile=nu40060001001A_det1.fits 
</pre>
</p>
</blockquote>
<p>
<h2>BUGS</h2>
<h2>SEE ALSO</h2>
<h2>LAST MODIFIED</h2>
March 2013
</body>
</html>
