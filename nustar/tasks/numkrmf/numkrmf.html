<! NUMKRMF (June2013)  >                           
<html>
<head>
<style type="text/css">
  body { margin-left: 5%; margin-right: 5%; }
  h1,h2,h3,h4 { margin-left: -5%;}
</style>
<title>numkrmf help file</title>
</head>

<body>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#9690CC">
<h2>NAME</h2>
numkrmf -- Generates an RMF file for an input spatial region file for NuSTAR
<h2>USAGE</h2>
<tt>numkrmf infile srcregionfile outfile [parameter = < value >]</tt>
<h2>DESCRIPTION</h2>
'numkrmf' generates an OGIP-style Response Matrix File (RMF) which is suitable for input into the spectral 
fitting program XSPEC.
<p>
For NuSTAR, the CALDB stores two sets of RMF files, to be used for event files filtered or not filtered for the depth cut. Each 
set stores the RMF file appropriate for each detector pixel 
or group of detector pixels. The association between pixels and CALDB RMF files is specified in the 
CALDB RMF Grouping File provided in input through the parameter 'grprmffile'.
<p>
'numkrmf' first reads the keyword 'DEPTHCUT' of the input event file to select the appropriate 'grprmffile' CALDB file. Next, 
for each CALDB RMF file, computes the number 
of events in the input event file ('infile') within the input spatial region file (parameter 'srcregionfile'). 
The response of the detector is finally generated by 'numkrmf' calculating a weighted mean of the CALDB RMF 
files. The mean is computed using as weights the corresponding number of events and making use of the 
multi-mission FTOOL 'addrmf'. Optionally, by setting the input parameter 'cmprmf' to 'yes, the output RMF file is 
compressed using the multi-mission FTOOL 'cmprmf'.
<p>
<h2>PARAMETERS</h2>
<dl>
<dt>infile [file name]
<dd>Name of the input FITS event file.
<p>
<dt>(usrgtifile=NONE) [filename]
<dd>Name of the input user GTI file or NONE for none.
<p>  
<dt>srcregionfile [file name]
<dd>Name of the input source region file.
<p>  
<dt>outfile [file name]
<dd>Name of output RMF FITS file.
<p>
<dt>(grprmffile=CALDB) [filename]
<dd>Name of the input RMF Grouping File or CALDB.
<p>
<dt>(rmfdir=CALDB) [file name]
<dd>Name of the input RMF files directory or CALDB.
<p>
<dt>(cmprmf=yes) [boolean]
<dd>If set to yes, the output RMF file is compressed.
<p>
<dt>(clobber=no) [boolean]
<dd>If set to yes, overwrite the output file.
<p>
<dt>(history=yes) [boolean]
<dd>If set to yes, write parameter values and other information in HISTORY blocks.
<p>
<dt>(chatter = 2) [integer]
<dd>Chatter Level (min=0, max=5).
</dl>    
<h2>EXAMPLES</h2>
<ol>
<li> Generates the RMF file appropriate for the input spatial region 'source.reg'
<p>
<pre>
>  numkrmf infile=nu40060001001A01_cl.evt srcregionfile=source.reg outfile=nu40060001001A01_sr.rmf
</pre>
</p>
</blockquote>
<p>
<h2>BUGS</h2>
<h2>SEE ALSO</h2>
<h2>LAST MODIFIED</h2>
June 2013
</body>
</html>
