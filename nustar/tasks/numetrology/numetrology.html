<! NUMETROLOGY (Oct2016)  >                           

<html>
<head>
<style type="text/css">
  body { margin-left: 5%; margin-right: 5%; }
  h1,h2,h3,h4 { margin-left: -5%;}
</style>
<title>numetrology help file</title>
</head>

<body>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000" LINK="#9690CC">
<h2>NAME</h2>
numetrology -- Process the metrology data for NuSTAR
<h2>USAGE</h2>
<tt>numetrology metrologyfile [parameter = < value >]</tt>
<h2>DESCRIPTION</h2>
The task calculates the laser positions on the two PSD detectors,
tracking the spacecraft mast movements, by processing the input
telemetry metrology raw data (parameter 'metrologyfile'). The PSD X/Y
coordinates are written in the output file 'outpsdfile'. If the input
parameter 'psdflag' is set to 'yes' (default value), the X/Y
coordinates are corrected for the PSD detector distorsions using the
information stored in the CALDB Metrology Grid file (parameter
'metgridfile') and written in the outputfile 'outpsdfilecor'. By
setting 'psdcal=no', the X/Y coordinates are not corrected and the
original values are copied into the outputfile 'outpsdfilecor'.
Finally, the PSD lasers positions stored in the outputfile
'outpsdfilecor' are used to calculate the mast aspect solution which
is written in the output file 'mastaspectfile'.
<p>
By default the task processes the raw metrology data (parameter 'metflag=yes'). 
By setting the 'metflag' parameter to 'no', the corrected Position Sensing Detector File must be
provided in input through the parameter 'inpsdfilecor'.
<p>
<p>
<h2>PARAMETERS</h2>
<dl>
<dt>(metflag=yes) [boolean]
<dd>If set to yes, the task processes the metrology data.
<p>
<dt>metrologyfile [file name]
<dd>Name of the input raw Metrology File (used only if parameter 'metflag' is set to 'yes').
<p>
<dt>(metgridfile=CALDB) [file name]
<dd>Name of the input Metrology Grid File or CALDB (used only if parameter 'metflag' is set to 'yes').
<p>
<dt>inpsdfilecor [filename]
<dd>Name of the input corrected Position Sensing Detector File (used only if metflag=no).
<p>
<dt>(outpsdfile=DEFAULT) [filename]
<dd>Name of the output Position Sensing Detector File or DEFAULT to use standard name (used only if parameter 'metflag' is set to 'yes').
<p>
<dt>(outpsdfilecor=DEFAULT) [filename]
<dd>Name of the output corrected Position Sensing Detector File or DEFAULT to use standard name (used only if parameter 'metflag' is set to 'yes').
<p>
<dt>(alignfile=CALDB) [filename]
<dd>Name of the input alignment file or CALDB.
<p>
<dt>(mastaspectfile=DEFAULT) [filename]
<dd>Name of the output Mast Aspect Solution File or DEFAULT to use standard name.
<p>
<dt>(psdcal=yes) [boolean]
<dd>If set to yes, the task apply PSD linearization to the corrected Position Sensing Detector File.
<p>
<dt>(clobber=no) [boolean]
<dd>If set to yes, overwrite the output file.
<p>
<dt>(history=yes) [boolean]
<dd>If set to yes, write parameter values and other information in HISTORY blocks.
<p>
<dt>(chatter = 2) [integer]
<dd>Chatter Level (min=0, max=5).
</dl>    
<h2>EXAMPLES</h2>
<ol>
<li> Process the metrology data file 'nu40060001001_met.fits' using the calibration information stored in the 
CALDB. The mast aspect solution file is written in the output file 'nu40060001001_mast.fits'. The X/Y coordinates 
of the PSD detectors, before and after the correction for the distorsions, are stored in the output files 'nu40060001001_psd.fits' 
and 'nu40060001001_psdcorr.fits', respectively. 
<p>
<pre>
> numetrology metrologyfile=nu40060001001_met.fits 
</pre>
</p>
<li> Process the corrected Position Sensing Detector File 'nu40060001001_psdcorr.fits' and generate the mast aspect solution file 
'nu40060001001_mast.fits'.
<p>
<pre>
> numetrology metflag=no inpsdfilecor=nu40060001001_psdcorr.fits mastaspecfile=nu40060001001_mast.fits
</pre>
</p>
</blockquote>
<p>
<h2>BUGS</h2>
<h2>SEE ALSO</h2>
<h2>LAST MODIFIED</h2>
October 2016
</body>
</html>
