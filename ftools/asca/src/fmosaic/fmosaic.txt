FMOSAIC (May01)                 ftools.futils                FMOSAIC (May01)



NAME
    fmosaic -- Create a mosaic of several ASCA observations
    
    
USAGE
    fmosaic out_keyword imgsizex imgsizey cellsize RA DEC (Y/N energy cut) 
            [lower and upper limit] (Y/N background image done) [Method used
            for background] (Y/N mosaic of exposure maps) input_file  
        
 
    
DESCRIPTION
 
The fmosaic program is a fortran program adapted from an existing image_10
program written by E. Churazov, M. Gilfanov, and A. Finoguenov. A complete
rewriting of the code and the use of FITSIO was done by Ilana Harrus. 

This program creates a mosaic of several observations. 
The energy and the binning for X and Y direction are correctly taken into
account. 

The input is a file containing the events files to be merged
The user has different options: 
Mosaic of images, background and exposure maps with or without energy cuts.

The results are FITS files which can be then used to generate the 
smoothed maps of (Image-background)/Exposure. 

The input file format depends on what option the user choses:
The file can contains up to 4 columns:

The column are read in the order of: 
EVENTS/RMF/BACKGROUND/EMAP

when one of these is not needed, the columns shift. 
 
For example: 
The .rmf file is needed for energy cut.
NOTE: if the rmf file and the event file are not binned the same way, 
the  program will stop.

If the user choose to have NO energy cut, then the columns will be 
event_file  background_file exposure_map. 
The background file can be either a MKF file (if the user chose to use the 
CALDB directory) or a user generated background file. 
The MKF file is used in the case of the ASCA to derive the rigidity 
histogram and then assigning the same weight to the background files 
found in CALDB. 

The user can chose to use private background maps. 
This option was implemented for use with the program "mkgisbgd" written
by Ken Ebisawa and which produced maps and spectrum for the background
using a large set of files (point sources removed and corrected for 
exposure). 
The results are in counts/pixel/sec and the final map is 
renormalized at the end with the total exposure. 

If the choice is no energy cut, no background substraction but exposure map, 
the file should contain only two columns with:
event_file exposure_map

NOTE: The exposure maps have to be generated SEPARATELY
       using the stand-alone package for that

Now if an energy cut is needed, column two will always contains the RMF file 
and column 3 and 4 will be assigned to background and exposure maps. 

If the user decides to have no background mosaic generated but just exposure
mosaic, there will be no column 4 and column 3 will contain the exposure 
maps.

Output of the program is 1,2 or 3 FITS files. 


PARAMETERS
    
     out_keyword [character] 
        A keyword which will be used to generate the output file from the 
        fmosaic program. 

     (seed=2356789) [integer]
        A number used to randomize in the image reconstruction. A negative
        value implies that no randomization is done. 

     (sizeunit=arcmin) [character]
        The unit to be used in the final image. 
        Choices include: deg|arcmin|pix|max

     imgsizex  [real] 
         Final image size in the RA direction (unit set by "sizeunit")

     imgsizey  [real] 
         Final image size in the dec direction (unit set by "sizeunit")

     cells [real]
         Final image cell size in arcsec.

     ra0 [real]
         RA value of the center of the final image.

     dec0 [real]
         Dec value of the center of the final image.

     enrgcut [character]
         Do you want to perform an energy cut on the final image (Y/N)?

     el [real]
         If "enrgcut" is "yes" - Value fo the lower energy cut.

     eu [real]
         If "enrgcut" is "yes" - Value fo the upper energy cut.

     bckdone [character]
         Do you want to make a background mosaic image (Y/N)?

     bckmeth [character]
         If "bckdone" is "yes" - Which method do you want to use? 
         Choices are: --auto-- Use the files under CALDB
                      --user-- Use files generated by the user

     emapdone [character]
         Do you want to make a mosaic of existing exposure images (Y/N)?

     evfile [character]
         Name of the file which contains the list of all input files used 
         in the mosaic program. 


EXAMPLES
    1.  The standard way to run it is to type it without argument
    
         ft> fmosaic 


NOTES:
    
    
BUGS:



SEE ALSO


