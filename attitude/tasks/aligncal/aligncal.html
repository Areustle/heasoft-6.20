<!--=======================================-->
<!--  HEADAS HTML HELP FILE TEMPLATE, v1.1 -->
<!--=======================================-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
<style type="text/css">
  body { margin-left: 5%; margin-right: 5%; }
  h1,h2,h3,h4 { margin-left: -5%;}
</style>
<title>HEADAS help file</title>
</head>
<body>

<h2>NAME</h2>

aligncal - Calibrate the alignment of a detector

<h2>USAGE</h2>

<tt>aligncal pointsfile=&lt;filename&gt; teldef=&lt;filename&gt; outfile=&lt;filename&gt;</tt>

<h2>DESCRIPTION</h2>

This tool takes a list of observed and expected positions of celestial objects
and updates the ALIGNM keywords in a teldef file in order to account for the
differences. The positions do not need to be from the same observation.
<p>
Warning: this tool modifies the calibration of an instrument, which is not
something to be done lightly by the general user.

<h2>PARAMETERS</h2>
<dl>

<dt>pointsfile [filename]
<dd>A FITS file containing a list of observed and expected positions. The 
positions must be specified in sky coordinates (i.e. pixels) and do not need
to be integers.
Hidden keywords specify the names of the columns. See below.
<p>

<dt>outfile [filename]
<dd>The name of the modified teldef file which this tool will create.
It is permissable to overwrite the input file, but this is not reccomended.
<p>

<dt>teldef [filename]
<dd>Input teldef calibration file describing the instrument coordinate systems.
The sky coordinates used in the pointfile must be consistent with the sky 
coordinates described in this teldef file.
<p>

<dt>(pointsext = POINTS)[string]
<dd>EXTNAME keyword value for the FITS extension containing the observed
and expected positions.
<p>

<dt>(x0_col = X0) [string]
<dd>The column containing the observed sky X coordinates
<p>

<dt>(y0_col = Y0) [string]
<dd>The column containing the observed sky Y coordinates
<p>

<dt>(x1_col = X1) [string]
<dd>The column containing the expected sky X coordinates
<p>

<dt>(y1_col = Y1) [string]
<dd>The column containing the expected sky Y coordinates
<p>


<dt>(weight_col = WEIGHT) [string]
<dd>Optional columns containing relative weights to apply to each position
when doing the least squares fit. Typically the weights would reflect the
accuracy with which the positions are known.
If this parameter is set to "NONE"
(case insensitive) if if the named columns is not present in the 
fits file, then all points will receive equal weight.
<p>


<dt>(tolerance = 0.0001) [real]
<dd>The fitting process is iterative. This parameter gives the stopping criterion for
the desired RMS accuracy in pixels.
<p>

<dt>(iterations = 100) [real]
<dd>The maximum number of iterations before giving up regardless of whether
the RMS accuracy is better than the tolerance parameter.
<p>



<dt>(decimals = 13) [integer]
<dd>Number of decimal places to use when writing the new ALIGNM keyword
values.
<p>

<dt>dec [real]
<dd>Declination of center of exposure map [deg].
<p>

<dt>width [integer]
<dd>Width of exposure map [pixels].
<p>

<dt>height [integer]
<dd>Height of exposure map [pixels].
<p>

<dt>(attdelta = 0.1) [real]
<dd>Maximum change in attitude between incrementing the exposure map (radians).
<p>

<dt>(aberration = yes) [boolean]
<dd>Account for velocity aberration?
<p>

<dt>(chatter = 1) [enumerated integer]
<dd>Standard HEAdas chatter parameter.
<p>

</dl>

<h2>SEE ALSO</h2>

<p>

<p>

<h2>LAST MODIFIED</h2>

September 2003
</body>
</html>
